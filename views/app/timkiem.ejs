<html lang="en">

<head>
    <%- include('./components/head') -%>
</head>

<body>
    <%- include('./components/header') -%>
    <%- include('./components/bottomNav') -%>

    <div class="timkiem-box">
        <div class="container">
            <h4>Bạn đang tìm kiếm điều gì?</h4>
            <form class="row-change">
                <div class="cot-6-md cot-7-xxl">
                    <input type="text" class="form-control" id="searchInputPage"
                      placeholder="Nhập tên sách hoặc tài liệu bạn muốn tìm kiếm...">
                </div>
                <div class="cot-3-md">
                    <select class="form-select" aria-label="Default select example">
                        <option selected>Tất cả</option>
                        <option value="1">Sách</option>
                        <option value="2">Tài liệu</option>
                        <option value="3">Hình ảnh</option>
                        <option value="4">Video</option>
                    </select>
                </div>
                <div class="cot-3-md cot-2-xxl">
                    <a class="main-btn" href="#" onclick="searchProducts(event)" >
                        Tìm kiếm
                        <i class="bi bi-search ms-3"></i>
                    </a>
                </div>
            </form>
        </div>
    </div>

    <div class="main-body">
        <div class="container">
            <div class="row-change">
                <div class="cot-12 cot-3-lg pe-0 pe-lg-4">
                    <%- include('./components/sideCate') -%>
                    <%- include('./components/sideBooks') -%>
                    <%- include('./components/sideAuthors') -%>
                    <%- include('./components/sideTags') -%>
                </div>
                <div class="cot-12 cot-9-lg timkiem-body">
                    <div class="timkiem-top-nav mb-5">
                        <span>Kết quả</span>
                        <div class="timkiem-topright-nav">
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-1"
                                value="docs" checked>
                                <label class="form-check-label" for="timkiem-list-1">
                                    Tài liệu (<%= dataProducts.filter(item => item.additional.typeof === 'doc').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-2"
                                value="images"     >
                                <label class="form-check-label" for="timkiem-list-2">
                                    Ảnh (<%= dataProducts.filter(item => item.additional.typeof === 'image').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-3" value="videos" >
                                <label class="form-check-label" for="timkiem-list-3">
                                    Video (<%= dataProducts.filter(item => item.additional.typeof === 'video').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-4" value="books" >
                                <label class="form-check-label" for="timkiem-list-4">
                                    Sách (<%= dataProducts.filter(item => item.additional.typeof === 'book').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-5" value="slides" >
                                <label class="form-check-label" for="timkiem-list-5">
                                    Bài giảng (<%= dataProducts.filter(item => item.additional.typeof === 'lesson').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-6" value="news" >
                                <label class="form-check-label" for="timkiem-list-6">
                                    Tin tức (<%= dataProducts.filter(item => item.additional.typeof === 'news').length%>)
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="timkiem-check" id="timkiem-list-7" value="connects" >
                                <label class="form-check-label" for="timkiem-list-7">
                                    Kết nối (<%= dataProducts.filter(item => item.additional.typeof === 'connect').length%>)
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="timkiem-main-box row-change tab-content-search active" id="docs-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'doc'){
                                    name = item.name;
                                    pathUrl = item.pdf;
                            %>
                            <div class="cot-12 cot-6-lg d-flex gap-3 gap-md-3">
                                <div class="home-tulieu-img">
                                    <img class="mb-2" src="../public/app/images/icon/pdf-file.svg" alt="">
                                    <a href="../<%= pathUrl%>" download>Tải xuống</a>
                                </div>
                                <div class="home-tulieu-text">
                                    <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html">
                                        <h5 class="mb-3 br-line-3"><%= name%></h5>
                                    </a>
                                    <div class="home-tulieu-date d-flex justify-content-around">
                                        <span>Trương Quốc Đại</span>
                                        <span>10/06/2022</span>
                                    </div>
                                </div>
                            </div>
                        <%   }})
                        }%>
                       
                    </div>
                    <div class="timkiem-main-box row-change tab-content-search" id="images-tab">

                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'image'){
                                    name = item.name;
                                    pathImage = item.images[0]?.image || null;
                            %>
                            <div class="cot-3 hinhanh-all-box">
                                <div class="hinhanh-box-img">
                                    <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html">
                                        <img src="<%= pathImage%>" alt="">
                                    </a>
                                    <span><%= numberImage%> hình ảnh</span>
                                </div>
                                <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html">
                                    <h4 class="mt-3 br-line-1"><%= name%></h4>
                                </a>
                            </div>
                        <%   }})
                        }%>

                       
                    </div>
                    <div class="timkiem-main-box gap-4 tab-content-search" id="videos-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'video'){
                                    name = item.name;
                                    pathImage = item.images[0].image
                                    pathVideo = item.linkVideo;
                            %>
                            <div class="col-4">
                                <div class="home-video">
                                    <div class="home-hinhanh-img">
                                        <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html">
                                            <img src="<%= pathImage%>" alt="<%= name%>">
                                        </a>
                                        <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html" class="play-btn"><i class="bi bi-play-fill"></i></a>
                                    </div>
                                    <a href="<%= name.replace(/ /g , '-')%>-<%= item.pageId %>.<%= item._id %>.html">
                                        <h4 class="h4-title mt-4 br-line-2"><%= name%></h4>
                                    </a>
                                </div>
                            </div>
                        <%   }})
                        }%>
                       
                    </div>
                    <div class="timkiem-main-box tab-content-search" id="books-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'book'){
                                    name = item.name;
                                    pathImage = item.images[0].image
                            %>
                            <div class="cot-6-lg d-flex timkiem-book-box">
                                <div class="timkiem-book-img">
                                    <div class="timkiem-book-img-box">
                                        <img src="../<%= pathImage%>"
                                            alt="">
                                    </div>
                                </div>
                                <div class="timkiem-book-info d-flex flex-column">
                                    <h4 class="h4-title mb-3 br-line-3"><%= name%></h4>
                                    <span>Tác giả: <strong>Lê Bá Thảo</strong></span>
                                    <span>Số trang: 158</span>
                                    <span>Năm xuất bản: 2010</span>
                                    <span>Nguồn tài liệu: Nguồn tài liệu</span>
                                    <div class="timkiem-book-social d-flex">
                                        <span><i class="bi bi-heart"></i>403</span>
                                        <span><i class="bi bi-reply"></i>123</span>
                                        <span><i class="bi bi-eye"></i>222</span>
                                        <span><i class="bi bi-chat-left"></i>554</span>
                                    </div>
                                    <div class="timkiem-book-btn">
                                        <a href="#">Đọc tài liệu</a>
                                        <a href="#">Tải về</a>
                                    </div>
                                </div>
                            </div>
                        <%   }})
                        }%>
                       
                    </div>
                    <div class="timkiem-main-box row-change tab-content-search" id="slides-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'lesson'){
                                    name = item.name;
                            %>
                        <div class="cot-6-lg d-flex timkiem-book-box">
                            <div class="timkiem-book-img">
                                <div class="timkiem-book-img-box">
                                    <img src="https://images.squarespace-cdn.com/content/v1/5f241700a3b9e7503c42710c/1596843482538-Z1STV5IC8SVQ9YRIX0XP/BOOK+COVER+FINAL+RGB.jpg"
                                        alt="">
                                </div>
                            </div>
                            <div class="timkiem-book-info d-flex flex-column">
                                <h4 class="h4-title mb-3 br-line-3"><%= name%></h4>
                                <span>Tác giả: <strong>Lê Bá Thảo</strong></span>
                                <span>Số trang: 158</span>
                                <span>Năm xuất bản: 2010</span>
                                <span>Nguồn tài liệu: Nguồn tài liệu</span>
                                <div class="timkiem-book-tag d-flex mb-3">
                                    <a href="#"> <span>Tài liệu</span></a>
                                    <a href="#"> <span>Thiên nhiên</span></a>
                                    <a href="#"> <span>Rừng</span></a>
                                    <a href="#"> <span>Động vật</span></a>
                                    <a href="#"> <span>Hoang dã</span></a>
                                </div>
                                <div class="timkiem-book-social d-flex">
                                    <span><i class="bi bi-heart"></i>403</span>
                                    <span><i class="bi bi-reply"></i>123</span>
                                    <span><i class="bi bi-eye"></i>222</span>
                                    <span><i class="bi bi-chat-left"></i>554</span>
                                </div>
                                <div class="timkiem-book-btn">
                                    <a href="#">Đọc tài liệu</a>
                                    <a href="#">Tải về</a>
                                </div>
                            </div>
                        </div>
                        <%   }})
                        }%>
                       
                    </div>
                    <div class="timkiem-main-box row-change tab-content-search" id="news-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'news'){
                                    name = item.name;
                            %>
                        <div class="cot-6-lg d-flex timkiem-book-box">
                            <div class="timkiem-book-img">
                                <div class="timkiem-book-img-box">
                                    <img src="https://images.squarespace-cdn.com/content/v1/5f241700a3b9e7503c42710c/1596843482538-Z1STV5IC8SVQ9YRIX0XP/BOOK+COVER+FINAL+RGB.jpg"
                                        alt="">
                                </div>
                            </div>
                            <div class="timkiem-book-info d-flex flex-column">
                                <h4 class="h4-title mb-3 br-line-3"><%= name%></h4>
                                <span>Tác giả: <strong>Lê Bá Thảo</strong></span>
                                <span>Số trang: 158</span>
                                <span>Năm xuất bản: 2010</span>
                                <span>Nguồn tài liệu: Nguồn tài liệu</span>
                                <div class="timkiem-book-tag d-flex mb-3">
                                    <a href="#"> <span>Tài liệu</span></a>
                                    <a href="#"> <span>Thiên nhiên</span></a>
                                    <a href="#"> <span>Rừng</span></a>
                                    <a href="#"> <span>Động vật</span></a>
                                    <a href="#"> <span>Hoang dã</span></a>
                                </div>
                                <div class="timkiem-book-social d-flex">
                                    <span><i class="bi bi-heart"></i>403</span>
                                    <span><i class="bi bi-reply"></i>123</span>
                                    <span><i class="bi bi-eye"></i>222</span>
                                    <span><i class="bi bi-chat-left"></i>554</span>
                                </div>
                                <div class="timkiem-book-btn">
                                    <a href="#">Đọc tài liệu</a>
                                    <a href="#">Tải về</a>
                                </div>
                            </div>
                        </div>
                        <%   }})
                        }%>
                       
                    </div>
                    <div class="timkiem-main-box row-change tab-content-search" id="connects-tab">
                        <%if(dataProducts){
                            dataProducts.forEach( item => {
                                if(item.additional.typeof === 'connect'){
                                    name = item.name;
                                    pathImage = item.images[0].image
                            %>
                        <div class="cot-6-lg d-flex timkiem-book-box">
                            <div class="timkiem-book-img">
                                <div class="timkiem-book-img-box">
                                    <img src="../<%= pathImage%>"
                                        alt="">
                                </div>
                            </div>
                            <div class="timkiem-book-info d-flex flex-column">
                                <h4 class="h4-title mb-3 br-line-3"><%= name%></h4>
                                <span>Tác giả: <strong>Lê Bá Thảo</strong></span>
                                <span>Số trang: 158</span>
                                <span>Năm xuất bản: 2010</span>
                                <span>Nguồn tài liệu: Nguồn tài liệu</span>
                                <div class="timkiem-book-tag d-flex mb-3">
                                    <a href="#"> <span>Tài liệu</span></a>
                                    <a href="#"> <span>Thiên nhiên</span></a>
                                    <a href="#"> <span>Rừng</span></a>
                                    <a href="#"> <span>Động vật</span></a>
                                    <a href="#"> <span>Hoang dã</span></a>
                                </div>
                                <div class="timkiem-book-social d-flex">
                                    <span><i class="bi bi-heart"></i>403</span>
                                    <span><i class="bi bi-reply"></i>123</span>
                                    <span><i class="bi bi-eye"></i>222</span>
                                    <span><i class="bi bi-chat-left"></i>554</span>
                                </div>
                                <div class="timkiem-book-btn">
                                    <a href="#">Đọc tài liệu</a>
                                    <a href="#">Tải về</a>
                                </div>
                            </div>
                        </div>
                        <%   }})
                        }%>
                       
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    
    <script>
            const currentUrl = new URL(window.location.href);
            const searchTerm = currentUrl.searchParams.get('query');
            document.getElementById('searchInputPage').value = searchTerm;
    </script>

   <script>
        function searchProducts(event){
                search();
        }

        function search() {
            const valueInputSearch = document.getElementById('searchInputPage').value;
            window.location.href = '?query=' + encodeURIComponent(valueInputSearch);
        }
   </script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const checkboxes = document.querySelectorAll('.form-check-input');
        checkboxes.forEach(function (checkbox) {
            checkbox.addEventListener('change', function () {
                const tabId = this.value + '-tab';
                const tabContent = document.getElementById(tabId);

                if (this.checked) {
                    document.querySelectorAll('.tab-content-search').forEach(function (tab) {
                        tab.classList.remove('active');
                    });

                    tabContent.classList.add('active');
                } else {
                    tabContent.classList.remove('active');
                }
            });
        });
    });
</script>

    <%- include('./components/footer') -%>
    <%- include('./components/end') -%>

</body>

</html>